%main.container
  = link_to books_path, class: 'general-back-link' do
    %i.fa.fa-long-arrow-left.mr-15= t('.link.back')
  .row
    .col-sm-6
      .product-gallery
        .mb-20
          = image_tag @book.photo.url(:show_size), class: 'img-responsive'
        .images.clearfix
          %a.img-link{ href: '#' }
            = image_tag @book.photo
          %a.img-link{ href: '#' }
            = image_tag @book.photo
          %a.img-link{ href: '#' }
            = image_tag @book.photo
    .col-sm-6
      %h1.mt-res-0
        =@book.name
      %p.lead.small
        = prepare_for_view(@book.authors)
      .row
        = form_tag (order_items_path)  do
          = hidden_field_tag 'order_item[book_id]', @book.id
          = hidden_field_tag 'order_item[unit_price]', @book.price
          .col-xs-12.col-md-4
            %p.h1.in-gold-500.mt-10
              = label_tag nil, add_currency_to(@book.price)
          .col-xs-5.col-md-3
            .input-group.general-position
              %a.input-link{ href: '#', id: 'dec_value' }
                %i.fa.fa-minus.line-height-40
              = text_field_tag 'order_item[quantity]', 1, class: 'form-control quantity-input', min: 1
              %a.input-link{ href: '#', id: 'inc_value' }
                %i.fa.fa-plus.line-height-40
          .col-xs-7.col-md-5
            = button_tag t('.button.add_to_cart'), { type: 'submit', class: 'btn btn-default pull-right general-position' }
      .general-info-wrap.divider-lg
        %p= t('.description')
        %p.lead.small.line-height-2.description
          = @book.description
      .general-info-wrap.divider-lg
        .clearfix
          %p.pull-left= t('.published_at')
          %p.lead.small.pull-right
            = @book.publicated
      .general-info-wrap.divider-lg
        .clearfix
          %p.pull-left= t('.demension')
          %p.lead.small.pull-right
            = "H: #{@book.height} x W: #{@book.weight} x D: #{@book.depth}"
      .general-info-wrap.divider-lg
        .clearfix
          %p.pull-left= t('.materials')
          %p.lead.small.pull-right
            = @book.materials
  .mb-80
    %h3.in-gold-500.mb-25
      = "#{reviews_count(@reviews)}"
    - @reviews.each do |review|
      .general-message-wrap.divider-lg
        .clearfix
          %span.img-circle.logo-size.inlide-block.pull-left.logo-empty= user_logo(review.user)
          .ml-70
            %div
              .general-message-date.hidden-xs

              .max-240
                .general-message-verified= t('.verified_review')
                .general-message-name
                  = reviewer_name(review)
            = show_stars(review.rate_stars)
            %p
              = review.text
    - if user_signed_in?
      = form_for @review, method: 'post' do |f|
        = f.text_field :user_id, hidden: true, name: 'review[user_id]', value: current_user.id, type: 'text'
        = f.text_field  :book_id, hidden: true, name: 'review[book_id]', value: @book.id, type: 'text'
        .form-group
          = f.label :score, value: t('.form.score'), class: 'control-label input-label'
          .mb-15
            = f.select :rate_stars, (1..5)
        .form-group
          = f.label :review, value: t('.form.review'), class: 'control-label input-label'
          = f.text_area :text, rows: '4', id: 'review', class: 'form-control', name:"review[text]", type: "text"
        .text-center.general-text-align
          = f.submit  class: 'btn btn-default pull-right', value: t('.form.post')
    - else
      %p= t(sign_up_to_comment)

