%main.container
  = link_to :back, class: 'general-back-link' do
    %i.fa.fa-long-arrow-left.mr-15
    Back to results
  .row
    .col-sm-6
      .product-gallery
        .mb-20
          = image_tag @book.photo, class: 'img-responsive'
        .images.clearfix
          %a.img-link{href: "#"}
            = image_tag @book.photo
          %a.img-link{href: "#"}
            = image_tag @book.photo
          %a.img-link{href: "#"}
            = image_tag @book.photo
    .col-sm-6
      %h1.mt-res-0
        =@book.name
      %p.lead.small
        = prepare_for_view(@book.authors)
      .row
        = form_tag (order_items_path)  do
          = hidden_field_tag "order_item[book_id]", @book.id
          = hidden_field_tag 'order_item[unit_price]', @book.price
          .col-xs-12.col-md-4
            %p.h1.in-gold-500.mt-10
              = label_tag nil, @book.price
          .col-xs-5.col-md-3
            .input-group.general-position
              %a.input-link{href: "#"}
                %i.fa.fa-minus.line-height-40
              = text_field_tag 'order_item[quantity]', 1, class: "form-control quantity-input", min: 1
              %a.input-link{href: "#"}
                %i.fa.fa-plus.line-height-40
          .col-xs-7.col-md-5
            = button_tag "Add to Cart", {type: 'submit', class: 'btn btn-default pull-right general-position'}
      .general-info-wrap.divider-lg
        %p Description
        %p.lead.small.line-height-2
          = @book.description
          %a.in-gold-500.ml-10{href: "#"} Read More
      .general-info-wrap.divider-lg
        .clearfix
          %p.pull-left Year of publication
          %p.lead.small.pull-right
            = @book.publication
      .general-info-wrap.divider-lg
        .clearfix
          %p.pull-left Dimensions
          %p.lead.small.pull-right
            = "H: #{@book.dimension.h} x W: #{@book.dimension.w} x D: #{@book.dimension.d}"
      .general-info-wrap.divider-lg
        .clearfix
          %p.pull-left Materials
          %p.lead.small.pull-right
            = @book.materials
  .mb-80
    %h3.in-gold-500.mb-25
      = "#{reviews_count(@reviews)}"
    - @reviews.each do |review|
      .general-message-wrap.divider-lg
        .clearfix
          %img.img-circle.logo-size.inlide-block.pull-left{src: "https://www.smashingmagazine.com/wp-content/uploads/2015/09/smashing-book-5-2-large.jpg"}
          .ml-70
            %div
              .general-message-date.hidden-xs

              .max-240
                .general-message-verified Verified Reviewer
                .general-message-name
                  = "#{review.user.billing_address[:first_name]}, #{review.user.billing_address[:last_name]}"
            .mb-15
              %i.fa.fa-star.rate-star
              %i.fa.fa-star.rate-star
              %i.fa.fa-star.rate-star
              %i.fa.fa-star.rate-star
              %i.fa.fa-star.rate-star
            %p
              = review.text
    - if user_signed_in?
      = form_for @review, method: "post" do |f|
        = f.text_field :user_id, hidden: true, name: "review[user_id]", value: current_user.id, type: 'text'
        = f.text_field  :book_id, hidden: true, name: "review[book_id]", value: @book.id, type: 'text'
        .form-group
          = f.label :score, value: 'Score', class: 'control-label input-label'
          .mb-15
            %i.fa.fa-star
            %i.fa.fa-star
            %i.fa.fa-star
            %i.fa.fa-star
            %i.fa.fa-star
          = f.text_field :rate_stars,  hidden: true, id: 'score', name:"review[rate_stars]"
        .form-group
          = f.label :review, value: 'Review', class: 'control-label input-label'
          = f.text_area :text, rows: '4', id: 'review', class: 'form-control', name:"review[text]", type: "text"
        .text-center.general-text-align
          = f.submit  class: 'btn btn-default pull-right', value: 'Post'
    - else
      %p Sign up in order to comment

